{% extends 'main/base.html' %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "История заказов" %}{% endblock title %}

{% block content %}
<section class="orders-section">
    <div class="orders-container">
        
        <div class="orders-header">
            <h1>{% trans "История заказов" %}</h1>
            <p>{% trans "Просмотрите все свои оформленные заказы." %}</p>
        </div>
        
        <div class="orders-list">
            {% if orders %}
                {% for order in orders %}
                    <div class="order-card">
                        <div class="order-card-header">
                            <h2>{% trans "Заказ" %} № {{ order.id }}</h2>
                            <span class="order-status">
                                {% trans "Статус:" %} {{ order.status }}
                            </span>
                        </div>
                        
                        <div class="order-card-body">
                            <p><strong>{% trans "Дата создания заказа" %}:</strong> {{ order.created|date:"d.m.Y H:i" }}</p>
                            <p><strong>{% trans "Общая стоимость" %}:</strong> {{ order.total_price }} KZT</p>
                            <hr>
                            <h3 class="order-items-title">{% trans "Состав заказа" %}</h3>
                            
                            {% for item in order.items.all %}
                                <div class="order-item">
                                    <p>
                                        <strong>{% trans "Название:" %}</strong> 
                                        <a href="{% url 'main:product_detail' item.product.slug %}" class="order-item-link">
                                            {{ item.product.name }}
                                        </a>
                                    </p>
                                    <p><strong>{% trans "Количество:" %}</strong> {{ item.quantity }}</p>
                                    <p><strong>{% trans "Цена за единицу:" %}</strong> {{ item.price }} KZT</p>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <p class="no-orders-text">
                    {% trans "У вас ещё нет оформленных заказов." %}
                </p>
            {% endif %}
        </div>
        
    </div>
</section>
{% endblock content %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/orders_history.css' %}">
{% endblock extra_css %}
