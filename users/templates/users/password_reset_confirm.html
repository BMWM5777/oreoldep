{% extends "main/base.html" %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Установите новый пароль" %}{% endblock title %}

{% block content %}
<section class="pwconfirm-section">
    <div class="pwconfirm-container">
        <div class="pwconfirm-illustration">
            <img src="{% static 'img/reg-car-service.png' %}" alt="Car Service" class="pwconfirm-image">
            <div class="pwconfirm-overlay">
                <h3 class="pwconfirm-tagline">{% trans "Новый уровень безопасности" %}</h3>
                <p class="pwconfirm-subtext">{% trans "Защитите свой аккаунт надежным паролем" %}</p>
            </div>
        </div>
        
        <div class="pwconfirm-content">
            <div class="pwconfirm-header">
                <img src="{% static 'img/logo.png' %}" alt="Logo" class="pwconfirm-logo">
                <h1 class="pwconfirm-title">{% trans "Установите новый пароль" %}</h1>
            </div>

            <form class="pwconfirm-form" method="post">
                {% csrf_token %}
                
                <div class="pwconfirm-form-group">
                    <label for="id_new_password1" class="pwconfirm-form-label">
                        <i class="fas fa-lock pwconfirm-icon"></i>
                        {% trans "Новый пароль" %}
                    </label>
                    <div class="pwconfirm-password-wrapper">
                        <input type="password" 
                               class="pwconfirm-form-control" 
                               id="id_new_password1"
                               name="new_password1"
                               placeholder="{% trans "Не менее 8 символов" %}"
                               required>
                        <button type="button" class="pwconfirm-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <div class="pwconfirm-form-group">
                    <label for="id_new_password2" class="pwconfirm-form-label">
                        <i class="fas fa-lock pwconfirm-icon"></i>
                        {% trans "Подтвердите пароль" %}
                    </label>
                    <div class="pwconfirm-password-wrapper">
                        <input type="password" 
                               class="pwconfirm-form-control" 
                               id="id_new_password2"
                               name="new_password2"
                               placeholder="{% trans "Повторите новый пароль" %}"
                               required>
                        <button type="button" class="pwconfirm-password-toggle">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="pwconfirm-primary-btn">
                    <i class="fas fa-save pwconfirm-icon"></i>
                    {% trans "Сохранить пароль" %}
                </button>
            </form>
        </div>
    </div>
</section>
{% endblock content %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/all.min.css' %}">
<link rel="stylesheet" href="{% static 'css/password_reset_confirm.css' %}">
{% endblock extra_css %}

{% block extra_js %}
<script>
document.querySelectorAll('.pwconfirm-password-toggle').forEach(button => {
    button.addEventListener('click', () => {
        const input = button.previousElementSibling;
        const type = input.getAttribute('type') === 'password' ? 'text' : 'password';
        input.setAttribute('type', type);
        button.querySelector('i').classList.toggle('fa-eye-slash');
    });
});
</script>
{% endblock extra_js %}